var a=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(s,t,e)=>t in s?a(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,l=(a,s)=>{for(var t in s||(s={}))r.call(s,t)&&o(a,t,s[t]);if(e)for(var t of e(s))n.call(s,t)&&o(a,t,s[t]);return a};import{S as i,i as c,s as f,e as u,a as d,t as h,c as p,b as v,d as m,f as g,g as $,h as b,j as y,k as E,l as I,n as w,r as S,m as D,o as A,p as N,u as O,q as V,v as P,w as k,x as L,y as x,z as T,A as C,B as J,C as j,D as B,E as U,F as _,G as q}from"./vendor.349a45ad.js";import{Octokit as M}from"https://cdn.skypack.dev/@octokit/core@3.4.0";import{restEndpointMethods as z}from"https://cdn.skypack.dev/@octokit/plugin-rest-endpoint-methods@5.3.1";import{paginateRest as G}from"https://cdn.skypack.dev/@octokit/plugin-paginate-rest@2.13.3";function R(a){let s,t,e,r,n,o,l,i,c,f,D,A,N,O,V,P,k,L;return{c(){s=u("div"),t=u("nav"),e=u("div"),r=u("a"),n=u("img"),l=d(),i=u("h1"),c=u("strong"),f=h("Migration"),D=d(),A=u("a"),N=h("Lite"),O=d(),V=u("a"),P=h("Classic"),this.h()},l(a){s=p(a,"DIV",{class:!0});var o=v(s);t=p(o,"NAV",{class:!0,role:!0,"aria-label":!0});var u=v(t);e=p(u,"DIV",{class:!0});var d=v(e);r=p(d,"A",{class:!0,href:!0});var h=v(r);n=p(h,"IMG",{src:!0,width:!0,alt:!0}),h.forEach(m),l=g(d),i=p(d,"H1",{class:!0});var b=v(i);c=p(b,"STRONG",{});var y=v(c);f=$(y,"Migration"),y.forEach(m),b.forEach(m),D=g(d),A=p(d,"A",{class:!0,href:!0});var E=v(A);N=$(E,"Lite"),E.forEach(m),O=g(d),V=p(d,"A",{class:!0,href:!0});var I=v(V);P=$(I,"Classic"),I.forEach(m),d.forEach(m),u.forEach(m),o.forEach(m),this.h()},h(){n.src!==(o="logo.svg")&&b(n,"src","logo.svg"),b(n,"width","28"),b(n,"alt","Contributor Assistant Logo"),b(r,"class","navbar-item"),b(r,"href","https://github.com/cla-assistant/contributor-assistant"),b(i,"class","navbar-item"),b(A,"class","navbar-item"),b(A,"href","#"),b(V,"class","navbar-item"),b(V,"href","#"),b(e,"class","navbar-brand"),b(t,"class","navbar"),b(t,"role","navigation"),b(t,"aria-label","main navigation"),b(s,"class","container")},m(o,u){y(o,s,u),E(s,t),E(t,e),E(e,r),E(r,n),E(e,l),E(e,i),E(i,c),E(c,f),E(e,D),E(e,A),E(A,N),E(e,O),E(e,V),E(V,P),k||(L=[I(A,"click",a[1]),I(V,"click",a[2])],k=!0)},p:w,i:w,o:w,d(a){a&&m(s),k=!1,S(L)}}}function H(a,s,t){let{mode:e="lite"}=s;return a.$$set=a=>{"mode"in a&&t(0,e=a.mode)},[e,()=>t(0,e="lite"),()=>t(0,e="classic")]}class F extends i{constructor(a){super(),c(this,a,H,R,f,{mode:0})}}function K(a){let s,t,e=a[0].name+"";return{c(){s=u("span"),t=h(e),this.h()},l(a){s=p(a,"SPAN",{class:!0});var r=v(s);t=$(r,e),r.forEach(m),this.h()},h(){b(s,"class","file-name")},m(a,e){y(a,s,e),E(s,t)},p(a,s){1&s&&e!==(e=a[0].name+"")&&D(t,e)},d(a){a&&m(s)}}}function Y(a){let s,t,e,r,n,o,l,i,c,f,S,D,N,O=a[0]&&K(a);return{c(){s=u("div"),t=u("label"),e=u("input"),r=d(),n=u("span"),o=u("span"),l=u("i"),i=d(),c=u("span"),f=h("Choose a file…"),S=d(),O&&O.c(),this.h()},l(a){s=p(a,"DIV",{class:!0});var u=v(s);t=p(u,"LABEL",{class:!0});var d=v(t);e=p(d,"INPUT",{class:!0,type:!0,name:!0,id:!0,accept:!0}),r=g(d),n=p(d,"SPAN",{class:!0});var h=v(n);o=p(h,"SPAN",{class:!0});var b=v(o);l=p(b,"I",{class:!0}),v(l).forEach(m),b.forEach(m),i=g(h),c=p(h,"SPAN",{class:!0});var y=v(c);f=$(y,"Choose a file…"),y.forEach(m),h.forEach(m),S=g(d),O&&O.l(d),d.forEach(m),u.forEach(m),this.h()},h(){b(e,"class","file-input"),b(e,"type","file"),b(e,"name","resume"),b(e,"id",a[1]),b(e,"accept",a[2]),b(l,"class","fas fa-upload"),b(o,"class","file-icon"),b(c,"class","file-label"),b(n,"class","file-cta"),b(t,"class","file-label"),b(s,"class","file"),A(s,"has-name",a[0])},m(u,d){y(u,s,d),E(s,t),E(t,e),E(t,r),E(t,n),E(n,o),E(o,l),E(n,i),E(n,c),E(c,f),E(t,S),O&&O.m(t,null),D||(N=I(e,"change",a[4]),D=!0)},p(a,[r]){2&r&&b(e,"id",a[1]),4&r&&b(e,"accept",a[2]),a[0]?O?O.p(a,r):(O=K(a),O.c(),O.m(t,null)):O&&(O.d(1),O=null),1&r&&A(s,"has-name",a[0])},i:w,o:w,d(a){a&&m(s),O&&O.d(),D=!1,N()}}}function Q(a,s,t){let e,{file:r}=s,{control:n}=s,{accept:o}=s;return a.$$set=a=>{"file"in a&&t(0,r=a.file),"control"in a&&t(1,n=a.control),"accept"in a&&t(2,o=a.accept)},a.$$.update=()=>{8&a.$$.dirty&&e&&e[0]&&t(0,r=e[0])},[r,n,o,e,function(){e=this.files,t(3,e)}]}class W extends i{constructor(a){super(),c(this,a,Q,Y,f,{file:0,control:1,accept:2})}}function X(a){let s,t;const e=a[5].default,r=N(e,a,a[4],null);return{c(){s=u("a"),r&&r.c(),this.h()},l(a){s=p(a,"A",{download:!0,href:!0});var t=v(s);r&&r.l(t),t.forEach(m),this.h()},h(){b(s,"download",a[0]),b(s,"href",a[1])},m(a,e){y(a,s,e),r&&r.m(s,null),t=!0},p(a,[n]){r&&r.p&&(!t||16&n)&&O(r,e,a,a[4],t?n:-1,null,null),(!t||1&n)&&b(s,"download",a[0]),(!t||2&n)&&b(s,"href",a[1])},i(a){t||(V(r,a),t=!0)},o(a){P(r,a),t=!1},d(a){a&&m(s),r&&r.d(a)}}}function Z(a){return new Promise(((s,t)=>{const e=new FileReader;e.onload=function(){s(e.result)},e.onerror=function(){t()},e.readAsText(a)}))}function aa(a,s,t){let e,{$$slots:r={},$$scope:n}=s,{download:o}=s,{content:l}=s,{type:i="text/plain"}=s;return a.$$set=a=>{"download"in a&&t(0,o=a.download),"content"in a&&t(2,l=a.content),"type"in a&&t(3,i=a.type),"$$scope"in a&&t(4,n=a.$$scope)},a.$$.update=()=>{12&a.$$.dirty&&t(1,e=URL.createObjectURL(new Blob([l],{type:i})))},[o,e,l,i,n,r]}class sa extends i{constructor(a){super(),c(this,a,aa,X,f,{download:0,content:2,type:3})}}const ta={type:"contributor-assistant/signatures",version:1,data:{current:{formSHA:"",form:{name:"",description:"",body:[]},signatures:[]},previous:[],invalidated:[]}};function ea(a){let s,t;return{c(){s=u("p"),t=h("This file does not contain valid JSON"),this.h()},l(a){s=p(a,"P",{class:!0});var e=v(s);t=$(e,"This file does not contain valid JSON"),e.forEach(m),this.h()},h(){b(s,"class","help is-danger")},m(a,e){y(a,s,e),E(s,t)},d(a){a&&m(s)}}}function ra(a){let s,t;return{c(){s=u("p"),t=h("This file does not contain valid YAML"),this.h()},l(a){s=p(a,"P",{class:!0});var e=v(s);t=$(e,"This file does not contain valid YAML"),e.forEach(m),this.h()},h(){b(s,"class","help is-danger")},m(a,e){y(a,s,e),E(s,t)},d(a){a&&m(s)}}}function na(a){let s,t;return s=new sa({props:{download:"signatures.json",content:a[5],$$slots:{default:[oa]},$$scope:{ctx:a}}}),{c(){x(s.$$.fragment)},l(a){T(s.$$.fragment,a)},m(a,e){C(s,a,e),t=!0},p(a,t){const e={};32&t&&(e.content=a[5]),16384&t&&(e.$$scope={dirty:t,ctx:a}),s.$set(e)},i(a){t||(V(s.$$.fragment,a),t=!0)},o(a){P(s.$$.fragment,a),t=!1},d(a){J(s,a)}}}function oa(a){let s,t,e,r,n,o;return{c(){s=u("button"),t=u("span"),e=u("i"),r=d(),n=u("span"),o=h("Save"),this.h()},l(a){s=p(a,"BUTTON",{class:!0});var l=v(s);t=p(l,"SPAN",{class:!0});var i=v(t);e=p(i,"I",{class:!0}),v(e).forEach(m),i.forEach(m),r=g(l),n=p(l,"SPAN",{});var c=v(n);o=$(c,"Save"),c.forEach(m),l.forEach(m),this.h()},h(){b(e,"class","fas fa-download"),b(t,"class","icon"),b(s,"class","button is-success")},m(a,l){y(a,s,l),E(s,t),E(t,e),E(s,r),E(s,n),E(n,o)},d(a){a&&m(s)}}}function la(a){let s,t,e,r,n,o,l,i,c,f,w,D,N,O,q,M,z,G,R,H,F,K,Y,Q,X,Z,aa,sa,ta,oa,la,ia,ca,fa,ua,da,ha,pa,va,ma,ga,$a,ba,ya,Ea,Ia,wa,Sa,Da,Aa,Na,Oa,Va,Pa,ka,La,xa,Ta,Ca,Ja,ja,Ba,Ua,_a,qa,Ma,za,Ga,Ra,Ha;function Fa(s){a[10](s)}let Ka={control:"signature-input",accept:"application/json"};void 0!==a[0]&&(Ka.file=a[0]),va=new W({props:Ka}),k.push((()=>L(va,"file",Fa)));let Ya=a[6].signature&&ea();function Qa(s){a[11](s)}let Wa={control:"form-input",accept:".yml,.yaml"};void 0!==a[1]&&(Wa.file=a[1]),Va=new W({props:Wa}),k.push((()=>L(Va,"file",Qa)));let Xa=a[6].form&&ra(),Za=a[5]&&na(a);return{c(){s=u("h1"),t=h("CLA Assistant Lite"),e=d(),r=u("h2"),n=h("If you have added "),o=u("a"),l=h("custom fields"),i=h("\n  to your form, it is "),c=u("strong"),f=h("recommended"),w=h(" that you upload it as well to\n  properly format the signatures."),D=d(),N=u("div"),O=u("div"),q=d(),M=u("div"),z=u("div"),G=u("p"),R=u("input"),H=d(),F=u("span"),K=u("i"),Y=d(),Q=u("div"),X=u("p"),Z=u("input"),aa=d(),sa=u("span"),ta=u("i"),oa=d(),la=u("div"),ia=u("div"),ca=u("label"),fa=h("JSON Signature file"),ua=d(),da=u("div"),ha=u("div"),pa=u("div"),x(va.$$.fragment),ga=d(),Ya&&Ya.c(),$a=d(),ba=u("div"),ya=u("div"),Ea=u("label"),Ia=h("YAML form file "),wa=u("span"),Sa=h("Optional"),Da=d(),Aa=u("div"),Na=u("div"),Oa=u("div"),x(Va.$$.fragment),ka=d(),Xa&&Xa.c(),La=d(),xa=u("div"),Ta=u("div"),Ca=d(),Ja=u("div"),ja=u("div"),Ba=u("div"),Ua=u("button"),_a=h("Convert"),Ma=d(),za=u("div"),Za&&Za.c(),this.h()},l(a){s=p(a,"H1",{class:!0});var u=v(s);t=$(u,"CLA Assistant Lite"),u.forEach(m),e=g(a),r=p(a,"H2",{class:!0});var d=v(r);n=$(d,"If you have added "),o=p(d,"A",{href:!0});var h=v(o);l=$(h,"custom fields"),h.forEach(m),i=$(d,"\n  to your form, it is "),c=p(d,"STRONG",{});var b=v(c);f=$(b,"recommended"),b.forEach(m),w=$(d," that you upload it as well to\n  properly format the signatures."),d.forEach(m),D=g(a),N=p(a,"DIV",{class:!0});var y=v(N);O=p(y,"DIV",{class:!0}),v(O).forEach(m),q=g(y),M=p(y,"DIV",{class:!0});var E=v(M);z=p(E,"DIV",{class:!0});var I=v(z);G=p(I,"P",{class:!0});var S=v(G);R=p(S,"INPUT",{class:!0,type:!0,placeholder:!0}),H=g(S),F=p(S,"SPAN",{class:!0});var A=v(F);K=p(A,"I",{class:!0}),v(K).forEach(m),A.forEach(m),S.forEach(m),I.forEach(m),Y=g(E),Q=p(E,"DIV",{class:!0});var V=v(Q);X=p(V,"P",{class:!0});var P=v(X);Z=p(P,"INPUT",{class:!0,type:!0,placeholder:!0}),aa=g(P),sa=p(P,"SPAN",{class:!0});var k=v(sa);ta=p(k,"I",{class:!0}),v(ta).forEach(m),k.forEach(m),P.forEach(m),V.forEach(m),E.forEach(m),y.forEach(m),oa=g(a),la=p(a,"DIV",{class:!0});var L=v(la);ia=p(L,"DIV",{class:!0});var x=v(ia);ca=p(x,"LABEL",{class:!0,for:!0});var C=v(ca);fa=$(C,"JSON Signature file"),C.forEach(m),x.forEach(m),ua=g(L),da=p(L,"DIV",{class:!0});var J=v(da);ha=p(J,"DIV",{class:!0});var j=v(ha);pa=p(j,"DIV",{class:!0});var B=v(pa);T(va.$$.fragment,B),B.forEach(m),ga=g(j),Ya&&Ya.l(j),j.forEach(m),J.forEach(m),L.forEach(m),$a=g(a),ba=p(a,"DIV",{class:!0});var U=v(ba);ya=p(U,"DIV",{class:!0});var _=v(ya);Ea=p(_,"LABEL",{class:!0,for:!0});var W=v(Ea);Ia=$(W,"YAML form file "),wa=p(W,"SPAN",{class:!0});var ea=v(wa);Sa=$(ea,"Optional"),ea.forEach(m),W.forEach(m),_.forEach(m),Da=g(U),Aa=p(U,"DIV",{class:!0});var ra=v(Aa);Na=p(ra,"DIV",{class:!0});var na=v(Na);Oa=p(na,"DIV",{class:!0});var ma=v(Oa);T(Va.$$.fragment,ma),ma.forEach(m),ka=g(na),Xa&&Xa.l(na),na.forEach(m),ra.forEach(m),U.forEach(m),La=g(a),xa=p(a,"DIV",{class:!0});var Pa=v(xa);Ta=p(Pa,"DIV",{class:!0}),v(Ta).forEach(m),Ca=g(Pa),Ja=p(Pa,"DIV",{class:!0});var qa=v(Ja);ja=p(qa,"DIV",{class:!0});var Ga=v(ja);Ba=p(Ga,"DIV",{class:!0});var Ra=v(Ba);Ua=p(Ra,"BUTTON",{class:!0});var Ha=v(Ua);_a=$(Ha,"Convert"),Ha.forEach(m),Ra.forEach(m),Ma=g(Ga),za=p(Ga,"DIV",{class:!0});var Fa=v(za);Za&&Za.l(Fa),Fa.forEach(m),Ga.forEach(m),qa.forEach(m),Pa.forEach(m),this.h()},h(){b(s,"class","title"),b(o,"href","https://github.com/cla-assistant/contributor-assistant/tree/main/actions/signatures#custom-fields"),b(r,"class","subtitle"),b(O,"class","field-label is-normal"),b(R,"class","input"),b(R,"type","text"),b(R,"placeholder","Owner"),b(K,"class","fas fa-user"),b(F,"class","icon is-small is-left"),b(G,"class","control has-icons-left"),b(z,"class","field is-narrow"),b(Z,"class","input"),b(Z,"type","text"),b(Z,"placeholder","Repository"),b(ta,"class","fas fa-bookmark"),b(sa,"class","icon is-small is-left"),b(X,"class","control has-icons-left has-icons-right"),b(Q,"class","field is-narrow"),b(M,"class","field-body"),b(N,"class","field is-horizontal"),b(ca,"class","label"),b(ca,"for","signature-input"),b(ia,"class","field-label is-normal"),b(pa,"class","control"),b(ha,"class","field"),b(da,"class","field-body"),b(la,"class","field is-horizontal"),b(wa,"class","tag is-info is-light"),b(Ea,"class","label"),b(Ea,"for","form-input"),b(ya,"class","field-label is-normal"),b(Oa,"class","control"),b(Na,"class","field"),b(Aa,"class","field-body"),b(ba,"class","field is-horizontal"),b(Ta,"class","field-label"),b(Ua,"class","button is-link"),Ua.disabled=qa=!(a[0]&&a[2]&&a[3]),A(Ua,"is-loading",a[4]),b(Ba,"class","control"),b(za,"class","control"),b(ja,"class","field is-grouped"),b(Ja,"class","field-body"),b(xa,"class","field is-horizontal")},m(u,d){y(u,s,d),E(s,t),y(u,e,d),y(u,r,d),E(r,n),E(r,o),E(o,l),E(r,i),E(r,c),E(c,f),E(r,w),y(u,D,d),y(u,N,d),E(N,O),E(N,q),E(N,M),E(M,z),E(z,G),E(G,R),j(R,a[2]),E(G,H),E(G,F),E(F,K),E(M,Y),E(M,Q),E(Q,X),E(X,Z),j(Z,a[3]),E(X,aa),E(X,sa),E(sa,ta),y(u,oa,d),y(u,la,d),E(la,ia),E(ia,ca),E(ca,fa),E(la,ua),E(la,da),E(da,ha),E(ha,pa),C(va,pa,null),E(ha,ga),Ya&&Ya.m(ha,null),y(u,$a,d),y(u,ba,d),E(ba,ya),E(ya,Ea),E(Ea,Ia),E(Ea,wa),E(wa,Sa),E(ba,Da),E(ba,Aa),E(Aa,Na),E(Na,Oa),C(Va,Oa,null),E(Na,ka),Xa&&Xa.m(Na,null),y(u,La,d),y(u,xa,d),E(xa,Ta),E(xa,Ca),E(xa,Ja),E(Ja,ja),E(ja,Ba),E(Ba,Ua),E(Ua,_a),E(ja,Ma),E(ja,za),Za&&Za.m(za,null),Ga=!0,Ra||(Ha=[I(R,"input",a[8]),I(Z,"input",a[9]),I(Ua,"click",a[7])],Ra=!0)},p(a,[s]){4&s&&R.value!==a[2]&&j(R,a[2]),8&s&&Z.value!==a[3]&&j(Z,a[3]);const t={};!ma&&1&s&&(ma=!0,t.file=a[0],B((()=>ma=!1))),va.$set(t),a[6].signature?Ya||(Ya=ea(),Ya.c(),Ya.m(ha,null)):Ya&&(Ya.d(1),Ya=null);const e={};!Pa&&2&s&&(Pa=!0,e.file=a[1],B((()=>Pa=!1))),Va.$set(e),a[6].form?Xa||(Xa=ra(),Xa.c(),Xa.m(Na,null)):Xa&&(Xa.d(1),Xa=null),(!Ga||13&s&&qa!==(qa=!(a[0]&&a[2]&&a[3])))&&(Ua.disabled=qa),16&s&&A(Ua,"is-loading",a[4]),a[5]?Za?(Za.p(a,s),32&s&&V(Za,1)):(Za=na(a),Za.c(),V(Za,1),Za.m(za,null)):Za&&(U(),P(Za,1,1,(()=>{Za=null})),_())},i(a){Ga||(V(va.$$.fragment,a),V(Va.$$.fragment,a),V(Za),Ga=!0)},o(a){P(va.$$.fragment,a),P(Va.$$.fragment,a),P(Za),Ga=!1},d(a){a&&m(s),a&&m(e),a&&m(r),a&&m(D),a&&m(N),a&&m(oa),a&&m(la),J(va),Ya&&Ya.d(),a&&m($a),a&&m(ba),J(Va),Xa&&Xa.d(),a&&m(La),a&&m(xa),Za&&Za.d(),Ra=!1,S(Ha)}}}function ia(a,e,r){var n=this&&this.__awaiter||function(a,s,t,e){return new(t||(t=Promise))((function(r,n){function o(a){try{i(e.next(a))}catch(s){n(s)}}function l(a){try{i(e.throw(a))}catch(s){n(s)}}function i(a){var s;a.done?r(a.value):(s=a.value,s instanceof t?s:new t((function(a){a(s)}))).then(o,l)}i((e=e.apply(a,s||[])).next())}))};let o,i,c,f,u,d=!1,h={signature:!1,form:!1};return[o,i,c,f,d,u,h,function(){return n(this,void 0,void 0,(function*(){r(4,d=!0),yield function(){return n(this,void 0,void 0,(function*(){r(6,h.signature=!1,h),r(6,h.form=!1,h);const a=yield Z(o);let e,n;try{e=JSON.parse(a)}catch(d){return void r(6,h.signature=!0,h)}if(i){const a=yield Z(i);try{n=q.parse(a)}catch(p){return void r(6,h.form=!0,h)}}r(5,u=JSON.stringify(function(a,e={owner:"",repo:""},r){var n;const o=JSON.parse(JSON.stringify(ta));let i=[[!0]];if(void 0!==r){i=[];for(const a of r.body)"markdown"!==a.type&&i.push("signature"===a.id?[!0]:null)}for(const u of a.signedContributors)o.data.current.signatures.push((c=l({user:{databaseId:u.id,login:u.name}},e),f={issue:0,date:null!=(n=u.created_at)?n:(new Date).toJSON(),fields:i},s(c,t(f))));var c,f;return o}(e,{owner:c,repo:f},n)))}))}(),r(4,d=!1)}))},function(){c=this.value,r(2,c)},function(){f=this.value,r(3,f)},function(a){o=a,r(0,o)},function(a){i=a,r(1,i)}]}class ca extends i{constructor(a){super(),c(this,a,ia,la,f,{})}}function fa(a){let s,t;return{c(){s=u("p"),t=h("This file does not contain valid JSON"),this.h()},l(a){s=p(a,"P",{class:!0});var e=v(s);t=$(e,"This file does not contain valid JSON"),e.forEach(m),this.h()},h(){b(s,"class","help is-danger")},m(a,e){y(a,s,e),E(s,t)},d(a){a&&m(s)}}}function ua(a){let s,t;return{c(){s=u("p"),t=h("This file does not contain valid JSON"),this.h()},l(a){s=p(a,"P",{class:!0});var e=v(s);t=$(e,"This file does not contain valid JSON"),e.forEach(m),this.h()},h(){b(s,"class","help is-danger")},m(a,e){y(a,s,e),E(s,t)},d(a){a&&m(s)}}}function da(a){let s,t;return s=new sa({props:{download:"signatures.json",content:a[4],type:"application/json",$$slots:{default:[ha]},$$scope:{ctx:a}}}),{c(){x(s.$$.fragment)},l(a){T(s.$$.fragment,a)},m(a,e){C(s,a,e),t=!0},p(a,t){const e={};16&t&&(e.content=a[4]),32768&t&&(e.$$scope={dirty:t,ctx:a}),s.$set(e)},i(a){t||(V(s.$$.fragment,a),t=!0)},o(a){P(s.$$.fragment,a),t=!1},d(a){J(s,a)}}}function ha(a){let s,t,e,r,n,o;return{c(){s=u("button"),t=u("span"),e=u("i"),r=d(),n=u("span"),o=h("Save Signatures"),this.h()},l(a){s=p(a,"BUTTON",{class:!0});var l=v(s);t=p(l,"SPAN",{class:!0});var i=v(t);e=p(i,"I",{class:!0}),v(e).forEach(m),i.forEach(m),r=g(l),n=p(l,"SPAN",{});var c=v(n);o=$(c,"Save Signatures"),c.forEach(m),l.forEach(m),this.h()},h(){b(e,"class","fas fa-download"),b(t,"class","icon"),b(s,"class","button is-success")},m(a,l){y(a,s,l),E(s,t),E(t,e),E(s,r),E(s,n),E(n,o)},d(a){a&&m(s)}}}function pa(a){let s,t;return s=new sa({props:{download:"form.yml",content:a[5],type:"text/vnd.yaml",$$slots:{default:[va]},$$scope:{ctx:a}}}),{c(){x(s.$$.fragment)},l(a){T(s.$$.fragment,a)},m(a,e){C(s,a,e),t=!0},p(a,t){const e={};32&t&&(e.content=a[5]),32768&t&&(e.$$scope={dirty:t,ctx:a}),s.$set(e)},i(a){t||(V(s.$$.fragment,a),t=!0)},o(a){P(s.$$.fragment,a),t=!1},d(a){J(s,a)}}}function va(a){let s,t,e,r,n,o;return{c(){s=u("button"),t=u("span"),e=u("i"),r=d(),n=u("span"),o=h("Save Form"),this.h()},l(a){s=p(a,"BUTTON",{class:!0});var l=v(s);t=p(l,"SPAN",{class:!0});var i=v(t);e=p(i,"I",{class:!0}),v(e).forEach(m),i.forEach(m),r=g(l),n=p(l,"SPAN",{});var c=v(n);o=$(c,"Save Form"),c.forEach(m),l.forEach(m),this.h()},h(){b(e,"class","fas fa-download"),b(t,"class","icon"),b(s,"class","button is-success")},m(a,l){y(a,s,l),E(s,t),E(t,e),E(s,r),E(s,n),E(n,o)},d(a){a&&m(s)}}}function ma(a){let s,t,e,r,n,o,l,i,c,f,w,S,D,N,O,j,q,M,z,G,R,H,F,K,Y,Q,X,Z,aa,sa,ta,ea,ra,na,oa,la,ia,ca,ha,va,ma,ga,$a,ba,ya,Ea,Ia,wa,Sa,Da,Aa,Na,Oa,Va,Pa,ka,La,xa,Ta,Ca,Ja,ja,Ba,Ua,_a,qa;function Ma(s){a[8](s)}let za={control:"signature-input",accept:"application/json"};void 0!==a[0]&&(za.file=a[0]),R=new W({props:za}),k.push((()=>L(R,"file",Ma)));let Ga=a[6].signature&&fa();function Ra(s){a[9](s)}let Ha={control:"form-input",accept:".yml,.yaml"};function Fa(s){a[10](s)}void 0!==a[1]&&(Ha.file=a[1]),oa=new W({props:Ha}),k.push((()=>L(oa,"file",Ra)));let Ka={control:"form-input",accept:".yml,.yaml"};void 0!==a[2]&&(Ka.file=a[2]),wa=new W({props:Ka}),k.push((()=>L(wa,"file",Fa)));let Ya=a[6].metadata&&ua(),Qa=a[4]&&da(a),Wa=a[5]&&pa(a);return{c(){s=u("h1"),t=h("CLA Assistant Classic"),e=d(),r=u("h2"),n=h("If you have added "),o=u("a"),l=h("custom fields"),i=h("\n  to your form, it is "),c=u("strong"),f=h("recommended"),w=h(" that you upload it as well to\n  properly format the signatures."),S=d(),D=u("div"),N=u("div"),O=u("label"),j=h("JSON Signature file"),q=d(),M=u("div"),z=u("div"),G=u("div"),x(R.$$.fragment),F=d(),Ga&&Ga.c(),K=d(),Y=u("div"),Q=u("div"),X=u("label"),Z=h("Gist Document "),aa=u("span"),sa=h("Optional"),ta=d(),ea=u("div"),ra=u("div"),na=u("div"),x(oa.$$.fragment),ia=d(),ca=u("div"),ha=u("div"),va=u("label"),ma=h("Gist Metadata "),ga=u("span"),$a=h("Optional"),ba=d(),ya=u("div"),Ea=u("div"),Ia=u("div"),x(wa.$$.fragment),Da=d(),Ya&&Ya.c(),Aa=d(),Na=u("div"),Oa=u("div"),Va=d(),Pa=u("div"),ka=u("div"),La=u("div"),xa=u("button"),Ta=h("Convert"),Ja=d(),ja=u("div"),Qa&&Qa.c(),Ba=d(),Wa&&Wa.c(),this.h()},l(a){s=p(a,"H1",{class:!0});var u=v(s);t=$(u,"CLA Assistant Classic"),u.forEach(m),e=g(a),r=p(a,"H2",{class:!0});var d=v(r);n=$(d,"If you have added "),o=p(d,"A",{href:!0});var h=v(o);l=$(h,"custom fields"),h.forEach(m),i=$(d,"\n  to your form, it is "),c=p(d,"STRONG",{});var b=v(c);f=$(b,"recommended"),b.forEach(m),w=$(d," that you upload it as well to\n  properly format the signatures."),d.forEach(m),S=g(a),D=p(a,"DIV",{class:!0});var y=v(D);N=p(y,"DIV",{class:!0});var E=v(N);O=p(E,"LABEL",{class:!0,for:!0});var I=v(O);j=$(I,"JSON Signature file"),I.forEach(m),E.forEach(m),q=g(y),M=p(y,"DIV",{class:!0});var A=v(M);z=p(A,"DIV",{class:!0});var V=v(z);G=p(V,"DIV",{class:!0});var P=v(G);T(R.$$.fragment,P),P.forEach(m),F=g(V),Ga&&Ga.l(V),V.forEach(m),A.forEach(m),y.forEach(m),K=g(a),Y=p(a,"DIV",{class:!0});var k=v(Y);Q=p(k,"DIV",{class:!0});var L=v(Q);X=p(L,"LABEL",{class:!0,for:!0});var x=v(X);Z=$(x,"Gist Document "),aa=p(x,"SPAN",{class:!0});var C=v(aa);sa=$(C,"Optional"),C.forEach(m),x.forEach(m),L.forEach(m),ta=g(k),ea=p(k,"DIV",{class:!0});var J=v(ea);ra=p(J,"DIV",{class:!0});var B=v(ra);na=p(B,"DIV",{class:!0});var U=v(na);T(oa.$$.fragment,U),U.forEach(m),B.forEach(m),J.forEach(m),k.forEach(m),ia=g(a),ca=p(a,"DIV",{class:!0});var _=v(ca);ha=p(_,"DIV",{class:!0});var H=v(ha);va=p(H,"LABEL",{class:!0,for:!0});var W=v(va);ma=$(W,"Gist Metadata "),ga=p(W,"SPAN",{class:!0});var la=v(ga);$a=$(la,"Optional"),la.forEach(m),W.forEach(m),H.forEach(m),ba=g(_),ya=p(_,"DIV",{class:!0});var fa=v(ya);Ea=p(fa,"DIV",{class:!0});var ua=v(Ea);Ia=p(ua,"DIV",{class:!0});var da=v(Ia);T(wa.$$.fragment,da),da.forEach(m),Da=g(ua),Ya&&Ya.l(ua),ua.forEach(m),fa.forEach(m),_.forEach(m),Aa=g(a),Na=p(a,"DIV",{class:!0});var pa=v(Na);Oa=p(pa,"DIV",{class:!0}),v(Oa).forEach(m),Va=g(pa),Pa=p(pa,"DIV",{class:!0});var Sa=v(Pa);ka=p(Sa,"DIV",{class:!0});var Ca=v(ka);La=p(Ca,"DIV",{class:!0});var Ua=v(La);xa=p(Ua,"BUTTON",{class:!0});var _a=v(xa);Ta=$(_a,"Convert"),_a.forEach(m),Ua.forEach(m),Ja=g(Ca),ja=p(Ca,"DIV",{class:!0});var qa=v(ja);Qa&&Qa.l(qa),Ba=g(qa),Wa&&Wa.l(qa),qa.forEach(m),Ca.forEach(m),Sa.forEach(m),pa.forEach(m),this.h()},h(){b(s,"class","title"),b(o,"href","https://github.com/cla-assistant/contributor-assistant/tree/main/actions/signatures#custom-fields"),b(r,"class","subtitle"),b(O,"class","label"),b(O,"for","signature-input"),b(N,"class","field-label is-normal"),b(G,"class","control"),b(z,"class","field"),b(M,"class","field-body"),b(D,"class","field is-horizontal"),b(aa,"class","tag is-info is-light"),b(X,"class","label"),b(X,"for","form-input"),b(Q,"class","field-label is-normal"),b(na,"class","control"),b(ra,"class","field"),b(ea,"class","field-body"),b(Y,"class","field is-horizontal"),b(ga,"class","tag is-info is-light"),b(va,"class","label"),b(va,"for","form-input"),b(ha,"class","field-label is-normal"),b(Ia,"class","control"),b(Ea,"class","field"),b(ya,"class","field-body"),b(ca,"class","field is-horizontal"),b(Oa,"class","field-label"),b(xa,"class","button is-link"),xa.disabled=Ca=!a[0],A(xa,"is-loading",a[3]),b(La,"class","control"),b(ja,"class","control"),b(ka,"class","field is-grouped"),b(Pa,"class","field-body"),b(Na,"class","field is-horizontal")},m(u,d){y(u,s,d),E(s,t),y(u,e,d),y(u,r,d),E(r,n),E(r,o),E(o,l),E(r,i),E(r,c),E(c,f),E(r,w),y(u,S,d),y(u,D,d),E(D,N),E(N,O),E(O,j),E(D,q),E(D,M),E(M,z),E(z,G),C(R,G,null),E(z,F),Ga&&Ga.m(z,null),y(u,K,d),y(u,Y,d),E(Y,Q),E(Q,X),E(X,Z),E(X,aa),E(aa,sa),E(Y,ta),E(Y,ea),E(ea,ra),E(ra,na),C(oa,na,null),y(u,ia,d),y(u,ca,d),E(ca,ha),E(ha,va),E(va,ma),E(va,ga),E(ga,$a),E(ca,ba),E(ca,ya),E(ya,Ea),E(Ea,Ia),C(wa,Ia,null),E(Ea,Da),Ya&&Ya.m(Ea,null),y(u,Aa,d),y(u,Na,d),E(Na,Oa),E(Na,Va),E(Na,Pa),E(Pa,ka),E(ka,La),E(La,xa),E(xa,Ta),E(ka,Ja),E(ka,ja),Qa&&Qa.m(ja,null),E(ja,Ba),Wa&&Wa.m(ja,null),Ua=!0,_a||(qa=I(xa,"click",a[7]),_a=!0)},p(a,[s]){const t={};!H&&1&s&&(H=!0,t.file=a[0],B((()=>H=!1))),R.$set(t),a[6].signature?Ga||(Ga=fa(),Ga.c(),Ga.m(z,null)):Ga&&(Ga.d(1),Ga=null);const e={};!la&&2&s&&(la=!0,e.file=a[1],B((()=>la=!1))),oa.$set(e);const r={};!Sa&&4&s&&(Sa=!0,r.file=a[2],B((()=>Sa=!1))),wa.$set(r),a[6].metadata?Ya||(Ya=ua(),Ya.c(),Ya.m(Ea,null)):Ya&&(Ya.d(1),Ya=null),(!Ua||1&s&&Ca!==(Ca=!a[0]))&&(xa.disabled=Ca),8&s&&A(xa,"is-loading",a[3]),a[4]?Qa?(Qa.p(a,s),16&s&&V(Qa,1)):(Qa=da(a),Qa.c(),V(Qa,1),Qa.m(ja,Ba)):Qa&&(U(),P(Qa,1,1,(()=>{Qa=null})),_()),a[5]?Wa?(Wa.p(a,s),32&s&&V(Wa,1)):(Wa=pa(a),Wa.c(),V(Wa,1),Wa.m(ja,null)):Wa&&(U(),P(Wa,1,1,(()=>{Wa=null})),_())},i(a){Ua||(V(R.$$.fragment,a),V(oa.$$.fragment,a),V(wa.$$.fragment,a),V(Qa),V(Wa),Ua=!0)},o(a){P(R.$$.fragment,a),P(oa.$$.fragment,a),P(wa.$$.fragment,a),P(Qa),P(Wa),Ua=!1},d(a){a&&m(s),a&&m(e),a&&m(r),a&&m(S),a&&m(D),J(R),Ga&&Ga.d(),a&&m(K),a&&m(Y),J(oa),a&&m(ia),a&&m(ca),J(wa),Ya&&Ya.d(),a&&m(Aa),a&&m(Na),Qa&&Qa.d(),Wa&&Wa.d(),_a=!1,qa()}}}function ga(a,s,t){var e=this&&this.__awaiter||function(a,s,t,e){return new(t||(t=Promise))((function(r,n){function o(a){try{i(e.next(a))}catch(s){n(s)}}function l(a){try{i(e.throw(a))}catch(s){n(s)}}function i(a){var s;a.done?r(a.value):(s=a.value,s instanceof t?s:new t((function(a){a(s)}))).then(o,l)}i((e=e.apply(a,s||[])).next())}))};const r=new(M.plugin(z,G));let n,o,l,i,c,f=!1,u={signature:!1,metadata:!1,output:[]};return[n,o,l,f,i,c,u,function(){return e(this,void 0,void 0,(function*(){t(3,f=!0),yield function(){return e(this,void 0,void 0,(function*(){t(6,u.signature=!1,u),t(6,u.metadata=!1,u);const a=yield Z(n);let s,e,f;try{s=JSON.parse(a)}catch(h){return void t(6,u.signature=!0,u)}if(o&&(e=yield Z(o)),l){const a=yield Z(l);try{f=JSON.parse(a)}catch(p){return void t(6,u.metadata=!0,u)}}const d=yield async function(a,s,t,e){var r,n,o,l;const i=JSON.parse(JSON.stringify(ta)),c={name:"Contributor License Agreement",description:"Sign the Contributor License Agreement",title:"CLA Signature",labels:["signature form"],body:[]};c.body.push({type:"markdown",attributes:{value:null!=t?t:"Thank you for your submission, we appreciate it.\nPlease read our Contributor License Agreement."}});const f=[];for(const h in e){const a=e[h];switch(a.type){case"boolean":c.body.push({type:"checkboxes",id:a.githubKey,attributes:{description:a.description,options:[{label:null!=(r=a.title)?r:"I agree",required:a.required}]}});break;case"number":case"string":c.body.push({type:"input",id:a.githubKey,attributes:{label:null!=(n=a.title)?n:"Input:",description:a.description,required:a.required}});break;case"textarea":c.body.push({type:"textarea",id:a.githubKey,attributes:{label:null!=(o=a.title)?o:"Input:",description:a.description,required:a.required}});break;case"hidden":default:if("object"==typeof a.type){c.body.push({type:"dropdown",id:a.githubKey,attributes:{label:null!=(l=a.title)?l:"Input:",description:a.description,required:a.required,options:a.type.enum}});break}throw new Error(`unknown input type: ${a.type}`)}f.push(h)}c.body.push({type:"checkboxes",id:"signature",attributes:{label:"Signature",options:[{label:"I have read the Contributor Document and I hereby sign this document.",required:!0}]}});const u=await Promise.allSettled(s.map((s=>a.rest.users.getByUsername({username:s.user_name})))),d=[];for(let h=0;h<s.length;h++){const a=s[h],t=u[h];if("fulfilled"===t.status){const s=[];let e=0;for(const t of c.body)if("markdown"!==t.type){if("signature"===t.id)s.push([!0]);else switch(t.type){case"input":case"textarea":s.push(`${a[f[e]]}`);break;case"dropdown":s.push(t.attributes.options.indexOf(`${a[f[e]]}`));break;case"checkboxes":s.push([!!a[f[e]]])}e++}i.data.current.signatures.push({user:{databaseId:t.value.data.id,login:a.user_name},owner:a.repo_owner,repo:a.repo_name,issue:0,date:a.signed_at,fields:s})}else d.push({username:s[h].user_name,reason:t.reason})}return{signatures:i,form:c,errors:d}}(r,s,e,f);t(4,i=JSON.stringify(d.signatures)),t(5,c=q.stringify(d.form)),t(6,u.output=d.errors,u)}))}(),t(3,f=!1)}))},function(a){n=a,t(0,n)},function(a){o=a,t(1,o)},function(a){l=a,t(2,l)}]}class $a extends i{constructor(a){super(),c(this,a,ga,ma,f,{})}}function ba(a){let s,t;return s=new $a({}),{c(){x(s.$$.fragment)},l(a){T(s.$$.fragment,a)},m(a,e){C(s,a,e),t=!0},i(a){t||(V(s.$$.fragment,a),t=!0)},o(a){P(s.$$.fragment,a),t=!1},d(a){J(s,a)}}}function ya(a){let s,t;return s=new ca({}),{c(){x(s.$$.fragment)},l(a){T(s.$$.fragment,a)},m(a,e){C(s,a,e),t=!0},i(a){t||(V(s.$$.fragment,a),t=!0)},o(a){P(s.$$.fragment,a),t=!1},d(a){J(s,a)}}}function Ea(a){let s,t,e,r,n,o,l,i,c;function f(s){a[1](s)}let h={};void 0!==a[0]&&(h.mode=a[0]),t=new F({props:h}),k.push((()=>L(t,"mode",f)));const $=[ya,ba],I=[];function w(a,s){return"lite"===a[0]?0:1}return l=w(a),i=I[l]=$[l](a),{c(){s=u("main"),x(t.$$.fragment),r=d(),n=u("div"),o=u("section"),i.c(),this.h()},l(a){s=p(a,"MAIN",{});var e=v(s);T(t.$$.fragment,e),r=g(e),n=p(e,"DIV",{class:!0});var l=v(n);o=p(l,"SECTION",{class:!0});var c=v(o);i.l(c),c.forEach(m),l.forEach(m),e.forEach(m),this.h()},h(){b(o,"class","section"),b(n,"class","container")},m(a,e){y(a,s,e),C(t,s,null),E(s,r),E(s,n),E(n,o),I[l].m(o,null),c=!0},p(a,[s]){const r={};!e&&1&s&&(e=!0,r.mode=a[0],B((()=>e=!1))),t.$set(r);let n=l;l=w(a),l!==n&&(U(),P(I[n],1,1,(()=>{I[n]=null})),_(),i=I[l],i||(i=I[l]=$[l](a),i.c()),V(i,1),i.m(o,null))},i(a){c||(V(t.$$.fragment,a),V(i),c=!0)},o(a){P(t.$$.fragment,a),P(i),c=!1},d(a){a&&m(s),J(t),I[l].d()}}}function Ia(a,s,t){let e;return[e,function(a){e=a,t(0,e)}]}new class extends i{constructor(a){super(),c(this,a,Ia,Ea,f,{})}}({target:document.getElementById("app")});
